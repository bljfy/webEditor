# 10 修改日志（Change Log）

## 目的
- 记录每次功能改动做了什么、为什么做、带来了什么影响。
- 显式记录当前技术负债，降低后续维护者理解成本。

## 记录规则（强制）
- 每次功能改动提交前，必须更新本文件。
- 每条日志至少包含：`日期`、`提交`、`改动内容`、`影响范围`、`技术负债/后续事项`。
- 纯文案或注释微调可合并记录；涉及行为变化的改动必须单独记录。

---

## 2026-02-18

### 1) 工程初始化与基础质量链路
- 提交：`dd4e241`
- 改动内容：
  - 初始化 `React + TypeScript + Vite`。
  - 接入 `ESLint`、`Vitest`、`Testing Library`、`Prettier`。
  - 建立基础目录与最小可运行页面/测试。
- 影响范围：
  - 工程从静态模板过渡到可持续开发结构。
- 技术负债/后续事项：
  - 仍需补齐 integration/e2e 测试与 CI 发布流程。

### 2) Node 类型配置修复
- 提交：`0bf964f`
- 改动内容：
  - 修复 `tsconfig.node.json`，稳定 `@types/node` 识别。
- 影响范围：
  - 消除 `tsconfig.node.json` 类型报错，保障构建稳定。
- 技术负债/后续事项：
  - 需持续关注 Node/TypeScript 版本升级兼容性。

### 3) Phase 2 基础编辑能力落地
- 提交：`762b79e`
- 改动内容：
  - 新增 `schema/store/panel/preview/renderer` 核心模块。
  - 支持 `meta/theme/nav/hero/sections` 结构化编辑与预览渲染。
- 影响范围：
  - 项目具备“可编辑 + 可预览”的主流程。
- 技术负债/后续事项：
  - 导出链路与预览一致性自动校验尚未实现。

### 4) 零代码产品原则文档化
- 提交：`d5829e5`
- 改动内容：
  - 在 `agent.md` 与关键 `docx` 文档中明确“面向不懂代码用户”。
- 影响范围：
  - 约束后续实现方向，避免技术向交互回潮。
- 技术负债/后续事项：
  - 需持续检查新功能是否违背零代码原则。

### 5) Panel 与页面同滚动（阶段性）
- 提交：`6fecfd2`
- 改动内容：
  - 调整样式，使 Panel 跟随页面滚动。
- 影响范围：
  - 初步改进编辑时的浏览体验。
- 技术负债/后续事项：
  - 后续被“滚动分离”方案替代，相关历史记录保留用于追溯。

### 6) Panel 小白友好重构
- 提交：`f5f0fe5`
- 改动内容：
  - 移除 JSON 编辑入口。
  - 采用全表单化方式编辑各类 section 内容。
  - 文案调整为更直白中文提示。
- 影响范围：
  - 显著降低非技术用户使用门槛。
- 技术负债/后续事项：
  - 表单较长，后续需继续优化分组与交互效率。

### 7) 可折叠表单支持
- 提交：`ca90886`
- 改动内容：
  - 主分组与区块子项支持折叠展开。
- 影响范围：
  - 缓解长表单带来的信息负担。
- 技术负债/后续事项：
  - 可进一步增加“记住展开状态”。

### 8) Panel/Preview 滚动分离与常驻可见
- 提交：`1a859f2`
- 改动内容：
  - 左右面板滚动独立，Panel 常驻可见。
- 影响范围：
  - 用户可边滚动预览边实时编辑。
- 技术负债/后续事项：
  - 需持续验证不同分辨率下滚动行为一致性。

### 9) 草稿-保存式编辑流
- 提交：`9d23c68`
- 改动内容：
  - 取消实时校验与实时更新。
  - 仅在点击“保存更改”时校验并更新预览。
- 影响范围：
  - 解决输入中途被拦截问题，编辑体验更自然。
- 技术负债/后续事项：
  - 可补“离开页面未保存提醒”与“撤销/重做”。

### 10) 中文校验报错与字段定位
- 提交：`c1629eb`
- 改动内容：
  - Zod 错误翻译为中文，附中文路径定位（含数组第 N 项）。
- 影响范围：
  - 用户可快速理解并修复输入错误。
- 技术负债/后续事项：
  - 可继续细化不同错误类型的提示文案。

### 11) 滚动高度计算修复
- 提交：`dfd465d`
- 改动内容：
  - 修复新增卡片后滚动条长度不更新的问题（`min-height: 0` + 明确高度约束）。
- 影响范围：
  - 长内容编辑时滚动行为稳定。
- 技术负债/后续事项：
  - 后续可补充端到端滚动回归测试。

### 12) 场地网格占位配置输入可见性修复
- 提交：`8e102ae`
- 改动内容：
  - 调整 Panel 中 `atlas-row` 布局为纵向堆叠，避免输入项在窄侧栏中被压缩截断。
- 影响范围：
  - 场地网格（含占位开关、图片地址、标题、标签）编辑项可完整显示。
- 技术负债/后续事项：
  - 后续可评估为不同字段设计更紧凑的专用布局，减少纵向空间占用。

### 13) 第三阶段：HTML 导出与一致性校验（进行中）
- 提交：`待本次提交`
- 改动内容：
  - 新增导出模块，支持 `PageConfig -> Renderer -> 单页 HTML` 导出。
  - 在编辑面板加入“导出 HTML”按钮。
  - 新增导出测试，校验文档完整性与渲染结构一致性。
- 影响范围：
  - 用户可直接下载离线 HTML 页面。
  - 预览与导出使用同一渲染源，减少双实现偏差。
- 技术负债/后续事项：
  - 目前为结构一致性验证，后续可补视觉回归校验（截图比对）。
